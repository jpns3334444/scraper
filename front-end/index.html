<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>東京 Real Estate</title>
    
    <!-- Japanese-inspired Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' fill='%23F7F5F2'/><circle cx='16' cy='16' r='10' fill='%23695b8d' opacity='0.8'/></svg>">
    
    <!-- Styles -->
    <link rel="stylesheet" href="shared/styles/base.css">
    <link rel="stylesheet" href="shared/styles/layout.css">
    <link rel="stylesheet" href="shared/styles/components.css">
    <link rel="stylesheet" href="features/properties/properties.css">
    <link rel="stylesheet" href="features/favorites/favorites.css">
    <link rel="stylesheet" href="features/auth/auth.css">
    <link rel="stylesheet" href="features/hidden/hidden.css">
</head>
<body>
    <!-- Authentication Modal -->
    <div id="authModal" class="modal"></div>
    
    <!-- User Info Display -->
    <div id="userInfo" class="user-info" style="display: none;">
        <span id="userEmail"></span>
        <button onclick="logout()">Logout</button>
    </div>
    
    <!-- Sign In Button for Anonymous Users -->
    <div id="signInPrompt" class="user-info" style="display: none;">
        <button onclick="showAuthModal()">Sign In</button>
    </div>
    
    <!-- Error Banner -->
    <div id="errorBanner" class="error-banner" style="display: none;">
        <span id="errorMessage"></span>
        <button onclick="hideErrorBanner()">✕</button>
    </div>
    
    <div class="container">
        <h1>東京 Real Estate</h1>
        
        <!-- Tab Navigation (will be populated by router.js) -->
        <div class="tab-navigation" id="tabNavigation"></div>
        
        <!-- Properties Tab -->
        <div id="properties-tab" class="tab-pane active">
            <div class="results-info">
                <div class="results-count" id="resultsCount">Loading properties...</div>
            </div>
            
            <div class="loading" id="loading">
                <!-- Loading skeleton will be populated by PropertiesView -->
            </div>
            
            <div class="table-container" id="tableContainer" style="display: none;">
                <table>
                    <thead>
                        <!-- Table header will be populated by PropertiesView -->
                    </thead>
                    <tbody id="propertiesTable">
                        <!-- Table rows will be populated by PropertiesView -->
                    </tbody>
                </table>
            </div>
            
            <!-- Pagination -->
            <div class="pagination-container" id="paginationContainer" style="display: none;">
                <div class="pagination" id="pagination"></div>
            </div>
        </div>
        
        <!-- Favorites Tab -->
        <div id="favorites-tab" class="tab-pane" style="display: none;">
            <div class="favorites-container" id="favoritesList"></div>
        </div>
        
        <!-- Hidden Tab -->
        <div id="hidden-tab" class="tab-pane" style="display: none;">
            <ul class="fav-list" id="hiddenList"></ul>
        </div>
    </div>
    
    <!-- Load JavaScript modules in correct order -->
    <script src="config/constants.js"></script>
    <script src="shared/utils/formatters.js"></script>
    <script src="shared/utils/storage.js"></script>
    <script src="shared/utils/dom.js"></script>
    <script src="core/api.js"></script>
    <script src="core/state.js"></script>
    <script src="core/router.js"></script>
    <script src="shared/components/Pagination.js"></script>
    <script src="shared/components/FilterDropdown.js"></script>
    <script src="shared/components/Table.js"></script>
    <script src="features/auth/AuthManager.js"></script>
    <script src="features/auth/AuthModal.js"></script>
    <script src="features/properties/PropertiesManager.js"></script>
    <script src="features/properties/PropertiesView.js"></script>
    <script src="features/favorites/FavoritesManager.js"></script>
    <script src="features/favorites/FavoritesView.js"></script>
    <script src="features/hidden/HiddenManager.js"></script>
    <script src="features/hidden/HiddenView.js"></script>
    <script src="main.js"></script>
</body>
</html>