<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>東京不動産 | Tokyo Real Estate</title>
        
        
        <!-- Preload Japanese Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@200;300;400&display=swap" rel="stylesheet">
        
        <!-- Styles -->
        <link rel="stylesheet" href="shared/styles/base.css">
        <link rel="stylesheet" href="shared/styles/layout.css">
        <link rel="stylesheet" href="shared/styles/components.css">
        <link rel="stylesheet" href="features/properties/properties.css">
        <link rel="stylesheet" href="features/favorites/favorites.css">
        <link rel="stylesheet" href="features/favorites/analysis.css">
        <link rel="stylesheet" href="features/auth/auth.css">
        <link rel="stylesheet" href="features/hidden/hidden.css">
    
        <!-- Add inline markdown styles for immediate availability -->
        <style>
            /* Markdown Analysis Styles - Inline for quick loading */
            .analysis-markdown-content {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Serif JP', serif;
                line-height: 1.7;
                color: #2c3e50;
                padding: 20px 0;
            }
    
            .analysis-markdown-content h2 {
                font-size: 1.5rem;
                font-weight: 400;
                color: #1a1a1a;
                margin: 25px 0 15px 0;
                padding-bottom: 8px;
                border-bottom: 2px solid #e5e7eb;
            }
    
            .analysis-markdown-content h3 {
                font-size: 1.2rem;
                font-weight: 400;
                color: #2c3e50;
                margin: 20px 0 10px 0;
            }
    
            /* Critical table styles for commute times */
            .analysis-markdown-content table {
                width: 100%;
                border-collapse: collapse;
                margin: 20px 0;
                background: white;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
                font-size: 14px;
            }
    
            .analysis-markdown-content thead {
                background: #f8f9fa;
            }
    
            .analysis-markdown-content th {
                padding: 12px 15px;
                text-align: left;
                font-weight: 600;
                color: #1a1a1a;
                border-bottom: 2px solid #dee2e6;
                font-size: 13px;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
    
            .analysis-markdown-content td {
                padding: 10px 15px;
                border-bottom: 1px solid #e9ecef;
                color: #495057;
            }
    
            .analysis-markdown-content tr:hover {
                background: #f8f9fa;
            }
    
            .analysis-markdown-content ul {
                margin: 15px 0;
                padding-left: 0;
                list-style: none;
            }
    
            .analysis-markdown-content li {
                position: relative;
                padding-left: 28px;
                margin-bottom: 8px;
                line-height: 1.6;
                color: #495057;
            }
    
            .analysis-markdown-content li:before {
                content: "•";
                position: absolute;
                left: 10px;
                color: #3498db;
                font-weight: bold;
                font-size: 16px;
            }
    
            .analysis-markdown-content p {
                margin: 15px 0;
                line-height: 1.7;
                color: #495057;
            }
    
            .analysis-markdown-content strong {
                font-weight: 600;
                color: #1a1a1a;
            }
            
            /* Fluid Ink Tab Indicator Styles - existing */
            .tab-navigation {
                position: relative;
                z-index: 15;
            }
            
            #inkCanvas {
                position: absolute;
                bottom: 0;
                left: 0;
                width: 100%;
                height: 60px;
                pointer-events: none;
                z-index: 14;
            }
            
            .tab-button {
                position: relative;
                z-index: 16;
            }
        </style>
    </head>
<body>



    <!-- Authentication Modal -->
    <div id="authModal" class="modal"></div>
    
    <!-- User Info Display -->
    <div id="userInfo" class="user-info" style="display: none;">
        <span id="userEmail"></span>
        <button onclick="logout()" class="ink-btn">ログアウト</button>
    </div>
    
    <!-- Sign In Button for Anonymous Users -->
    <div id="signInPrompt" class="user-info" style="display: none;">
        <button onclick="showAuthModal()" class="ink-btn">サインイン</button>
    </div>
    
    <!-- Error Banner -->
    <div id="errorBanner" class="error-banner" style="display: none;">
        <span id="errorMessage"></span>
        <button onclick="hideErrorBanner()">✕</button>
    </div>
    
    <div class="container">
        <!-- Title -->
        <div class="title-section">
            <h1>東京不動産</h1>
        </div>
        
        <!-- Tab Navigation -->
        <div class="tab-navigation" id="tabNavigation">
        </div>
        
        <!-- Properties Tab -->
        <div id="properties-tab" class="tab-pane active">
            <div class="loading" id="loading">
                <!-- Loading skeleton will be populated by PropertiesView -->
            </div>
            
            <!-- Results info -->
            <div class="results-info" id="resultsInfo" style="display: none;">
                <div class="results-count" id="resultsCount"></div>
            </div>
            
            <!-- Simple properties table with 50px padding -->
            <div class="properties-table-wrapper" id="tableContainer" style="display: none;">
                <table class="properties-table" id="propertiesTable">
                    <!-- Table content will be populated by PropertiesView -->
                </table>
            </div>
            
            <!-- Clean pagination -->
            <div class="pagination-wrapper" id="paginationContainer" style="display: none;">
                <div class="pagination" id="pagination"></div>
            </div>
        </div>
        
        <!-- Favorites Tab -->
        <div id="favorites-tab" class="tab-pane" style="display: none;">
            <div class="favorites-container" id="favoritesList"></div>
        </div>
        
        <!-- Hidden Tab -->
        <div id="hidden-tab" class="tab-pane" style="display: none;">
            <ul class="fav-list" id="hiddenList"></ul>
        </div>
        
        <!-- Analysis Page (no tab button) -->
        <div id="analysis-tab" class="tab-pane" style="display: none;">
            <div id="analysisContent"></div>
            <button class="ink-btn" onclick="window.app.router.switchTab('favorites')">Back to Favorites</button>
        </div>
    </div>
    
    
    <!-- Load JavaScript modules in correct order -->
    <script src="config/constants.js"></script>
    <script src="shared/utils/formatters.js"></script>
    <script src="shared/utils/storage.js"></script>
    <script src="shared/utils/dom.js"></script>
    <script src="core/api.js"></script>
    <script src="core/state.js"></script>
    <script src="core/router.js"></script>
    <!-- Removed pagination component - using inline implementation -->
    <script src="shared/components/FilterDropdown.js"></script>
    <script src="shared/components/Table.js"></script>
    <script src="features/auth/AuthManager.js"></script>
    <script src="features/auth/AuthModal.js"></script>
    <script src="features/properties/PropertiesManager.js"></script>
    <script src="features/properties/PropertiesView.js"></script>
    <script src="features/favorites/FavoritesManager.js"></script>
    <script src="features/favorites/FavoritesView.js"></script>
    <script src="features/favorites/AnalysisView.js"></script>
    <script src="features/hidden/HiddenManager.js"></script>
    <script src="features/hidden/HiddenView.js"></script>
    <script src="main.js"></script>

</body>
</html>